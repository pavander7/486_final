{% extends "base.html" %}

{% block title %}Medication Interaction Lookup{% endblock %}

{% block content %}
<div class="container">
    <header class="text-center my-5">
        <h1>Medication Interaction Checker</h1>
        <p class="lead">Check potential interactions between your medications and supplements</p>
    </header>

    <!-- Search Section -->
    <section class="search-section" aria-labelledby="search-heading">
        <h2 id="search-heading" class="sr-only">Search for Medications</h2>
        <form class="search-form" role="search">
            <div class="input-group">
                <input type="search" class="search-input form-control" placeholder="Enter medication name..."
                    aria-label="Search for medications" required>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
        </form>
    </section>

    <!-- Results Section -->
    <section class="results-section" aria-labelledby="results-heading">
        <h2 id="results-heading" class="sr-only">Search Results</h2>
        <!-- Results will be dynamically inserted here -->
    </section>

    <!-- Selected Drugs Section -->
    <section class="selected-drugs-section mt-4" aria-labelledby="selected-heading">
        <h2 id="selected-heading">Selected Medications</h2>
        <div class="selected-drugs-list">
            <!-- Selected drugs will be dynamically inserted here -->
        </div>
        <form class="interaction-form mt-3">
            <button type="submit" class="btn btn-primary" disabled>
                Check Interactions
            </button>
        </form>
    </section>

    <!-- Interactions Section -->
    <section class="interactions-section mt-4" aria-labelledby="interactions-heading">
        <h2 id="interactions-heading">Potential Interactions</h2>
        <!-- Interaction results will be dynamically inserted here -->
    </section>

    <!-- Accessibility Panel -->
    <div class="accessibility-panel" role="complementary" aria-label="Accessibility Settings">
        <h3>Accessibility Settings</h3>
        <div class="btn-group-vertical">
            <button class="font-size-control btn btn-sm" data-size="16px">Normal Text</button>
            <button class="font-size-control btn btn-sm" data-size="20px">Large Text</button>
            <button class="font-size-control btn btn-sm" data-size="24px">Larger Text</button>
            <button class="contrast-toggle btn btn-sm">High Contrast</button>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Initialize the application
    document.addEventListener('DOMContentLoaded', function () {
        // Focus management
        const searchInput = document.querySelector('.search-input');
        if (searchInput) {
            searchInput.focus();
        }

        // Update interaction check button state
        const interactionForm = document.querySelector('.interaction-form');
        const checkButton = interactionForm.querySelector('button[type="submit"]');

        document.addEventListener('drugSelectionChange', function () {
            const selectedDrugs = document.querySelectorAll('.select-drug.selected');
            checkButton.disabled = selectedDrugs.length < 2;
        });
    });
</script>
{% endblock %}